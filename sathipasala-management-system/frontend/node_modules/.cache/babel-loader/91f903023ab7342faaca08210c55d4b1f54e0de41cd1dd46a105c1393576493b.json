{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sathipasala\\\\sathipasala-management-system\\\\frontend\\\\src\\\\components\\\\common\\\\ImageUpload.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageUpload = ({\n  initialImage = null,\n  onImageChange,\n  label = 'Upload Image',\n  className = ''\n}) => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const [preview, setPreview] = useState(initialImage);\n  const [error, setError] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef();\n  const handleFileChange = e => {\n    setError(null);\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];\n    if (!allowedTypes.includes(file.type)) {\n      setError(t('common.errors.invalidImageType'));\n      return;\n    }\n\n    // Validate file size (max 2MB)\n    if (file.size > 2 * 1024 * 1024) {\n      setError(t('common.errors.imageTooLarge'));\n      return;\n    }\n\n    // Create preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setPreview(reader.result);\n    };\n    reader.readAsDataURL(file);\n\n    // Pass the file to parent component\n    onImageChange(file);\n  };\n  const handleRemoveImage = () => {\n    setPreview(null);\n    fileInputRef.current.value = '';\n    onImageChange(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-24 h-24 relative border rounded overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800\",\n        children: [preview ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview,\n          alt: \"Preview\",\n          className: \"max-w-full max-h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-400 dark:text-gray-500 text-4xl\",\n          children: \"\\uD83D\\uDCF7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-8 w-8 border-2 border-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileChange,\n          accept: \"image/png, image/jpeg, image/gif\",\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => fileInputRef.current.click(),\n          className: \"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\",\n          children: preview ? t('common.buttons.changeImage') : t('common.buttons.selectImage')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), preview && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleRemoveImage,\n          className: \"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors\",\n          children: t('common.buttons.removeImage')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-1 text-sm text-red-600 dark:text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-1 text-xs text-gray-500 dark:text-gray-400\",\n      children: t('common.hints.imageRequirements')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageUpload, \"tLfYkApVMkVEIMXrLf2dPRZCL0U=\", false, function () {\n  return [useTranslation];\n});\n_c = ImageUpload;\nexport default ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useState","useRef","useTranslation","jsxDEV","_jsxDEV","ImageUpload","initialImage","onImageChange","label","className","_s","t","preview","setPreview","error","setError","uploading","setUploading","fileInputRef","handleFileChange","e","file","target","files","allowedTypes","includes","type","size","reader","FileReader","onloadend","result","readAsDataURL","handleRemoveImage","current","value","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","ref","onChange","accept","onClick","click","_c","$RefreshReg$"],"sources":["D:/Sathipasala/sathipasala-management-system/frontend/src/components/common/ImageUpload.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst ImageUpload = ({ \r\n  initialImage = null, \r\n  onImageChange,\r\n  label = 'Upload Image',\r\n  className = ''\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [preview, setPreview] = useState(initialImage);\r\n  const [error, setError] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const fileInputRef = useRef();\r\n\r\n  const handleFileChange = (e) => {\r\n    setError(null);\r\n    const file = e.target.files[0];\r\n    \r\n    if (!file) return;\r\n    \r\n    // Validate file type\r\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setError(t('common.errors.invalidImageType'));\r\n      return;\r\n    }\r\n    \r\n    // Validate file size (max 2MB)\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      setError(t('common.errors.imageTooLarge'));\r\n      return;\r\n    }\r\n    \r\n    // Create preview\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setPreview(reader.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n    \r\n    // Pass the file to parent component\r\n    onImageChange(file);\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setPreview(null);\r\n    fileInputRef.current.value = '';\r\n    onImageChange(null);\r\n  };\r\n\r\n  return (\r\n    <div className={`${className}`}>\r\n      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n        {label}\r\n      </label>\r\n      \r\n      <div className=\"flex items-center space-x-4\">\r\n        {/* Preview */}\r\n        <div className=\"w-24 h-24 relative border rounded overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800\">\r\n          {preview ? (\r\n            <img \r\n              src={preview} \r\n              alt=\"Preview\" \r\n              className=\"max-w-full max-h-full object-cover\"\r\n            />\r\n          ) : (\r\n            <span className=\"text-gray-400 dark:text-gray-500 text-4xl\">\r\n              ðŸ“·\r\n            </span>\r\n          )}\r\n          \r\n          {uploading && (\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-2 border-white\"></div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Upload buttons */}\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <input\r\n            type=\"file\"\r\n            ref={fileInputRef}\r\n            onChange={handleFileChange}\r\n            accept=\"image/png, image/jpeg, image/gif\"\r\n            className=\"hidden\"\r\n          />\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={() => fileInputRef.current.click()}\r\n            className=\"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n          >\r\n            {preview ? t('common.buttons.changeImage') : t('common.buttons.selectImage')}\r\n          </button>\r\n          \r\n          {preview && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleRemoveImage}\r\n              className=\"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n            >\r\n              {t('common.buttons.removeImage')}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Error message */}\r\n      {error && (\r\n        <div className=\"mt-1 text-sm text-red-600 dark:text-red-500\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n        {t('common.hints.imageRequirements')}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}