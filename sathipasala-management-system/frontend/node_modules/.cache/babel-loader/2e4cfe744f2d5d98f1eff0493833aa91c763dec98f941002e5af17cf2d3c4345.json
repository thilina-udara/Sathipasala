{"ast":null,"code":"import { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nexport const generateAttendanceReport = (student, attendanceData) => {\n  // Create new PDF document\n  const doc = new jsPDF();\n  const pageWidth = doc.internal.pageSize.width;\n\n  // Add title\n  doc.setFontSize(20);\n  doc.text('Student Attendance Report', pageWidth / 2, 20, {\n    align: 'center'\n  });\n\n  // Add student details\n  doc.setFontSize(12);\n  doc.text(`Name: ${student.name.en}`, 15, 40);\n  doc.text(`Student ID: ${student.studentId}`, 15, 48);\n  doc.text(`Class: ${student.classYear}-${student.classCode}`, 15, 56);\n\n  // Add attendance summary\n  doc.setFontSize(16);\n  doc.text('Attendance Summary', pageWidth / 2, 70, {\n    align: 'center'\n  });\n\n  // Calculate attendance stats\n  const total = attendanceData.length;\n  const present = attendanceData.filter(item => item.status === 'present').length;\n  const absent = attendanceData.filter(item => item.status === 'absent').length;\n  const late = attendanceData.filter(item => item.status === 'late').length;\n  const attendanceRate = total > 0 ? (present / total * 100).toFixed(1) : 0;\n\n  // Add stats as a small table\n  doc.autoTable({\n    startY: 80,\n    head: [['Total Days', 'Present', 'Absent', 'Late', 'Attendance Rate']],\n    body: [[total, present, absent, late, `${attendanceRate}%`]]\n  });\n\n  // Add attendance details\n  doc.setFontSize(16);\n  doc.text('Attendance Records', pageWidth / 2, 110, {\n    align: 'center'\n  });\n\n  // Format data for table\n  const tableData = attendanceData.map(record => [new Date(record.date).toLocaleDateString(), record.status.charAt(0).toUpperCase() + record.status.slice(1), record.reason || '-']);\n\n  // Add attendance records table\n  doc.autoTable({\n    startY: 120,\n    head: [['Date', 'Status', 'Reason']],\n    body: tableData\n  });\n\n  // Save PDF\n  doc.save(`Attendance_${student.studentId}.pdf`);\n  return doc;\n};","map":{"version":3,"names":["jsPDF","generateAttendanceReport","student","attendanceData","doc","pageWidth","internal","pageSize","width","setFontSize","text","align","name","en","studentId","classYear","classCode","total","length","present","filter","item","status","absent","late","attendanceRate","toFixed","autoTable","startY","head","body","tableData","map","record","Date","date","toLocaleDateString","charAt","toUpperCase","slice","reason","save"],"sources":["D:/Sathipasala/sathipasala-management-system/frontend/src/utils/pdfGenerator.js"],"sourcesContent":["import { jsPDF } from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nexport const generateAttendanceReport = (student, attendanceData) => {\r\n  // Create new PDF document\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.width;\r\n  \r\n  // Add title\r\n  doc.setFontSize(20);\r\n  doc.text('Student Attendance Report', pageWidth / 2, 20, { align: 'center' });\r\n  \r\n  // Add student details\r\n  doc.setFontSize(12);\r\n  doc.text(`Name: ${student.name.en}`, 15, 40);\r\n  doc.text(`Student ID: ${student.studentId}`, 15, 48);\r\n  doc.text(`Class: ${student.classYear}-${student.classCode}`, 15, 56);\r\n\r\n  // Add attendance summary\r\n  doc.setFontSize(16);\r\n  doc.text('Attendance Summary', pageWidth / 2, 70, { align: 'center' });\r\n  \r\n  // Calculate attendance stats\r\n  const total = attendanceData.length;\r\n  const present = attendanceData.filter(item => item.status === 'present').length;\r\n  const absent = attendanceData.filter(item => item.status === 'absent').length;\r\n  const late = attendanceData.filter(item => item.status === 'late').length;\r\n  const attendanceRate = total > 0 ? (present / total * 100).toFixed(1) : 0;\r\n  \r\n  // Add stats as a small table\r\n  doc.autoTable({\r\n    startY: 80,\r\n    head: [['Total Days', 'Present', 'Absent', 'Late', 'Attendance Rate']],\r\n    body: [\r\n      [total, present, absent, late, `${attendanceRate}%`]\r\n    ],\r\n  });\r\n  \r\n  // Add attendance details\r\n  doc.setFontSize(16);\r\n  doc.text('Attendance Records', pageWidth / 2, 110, { align: 'center' });\r\n  \r\n  // Format data for table\r\n  const tableData = attendanceData.map(record => [\r\n    new Date(record.date).toLocaleDateString(),\r\n    record.status.charAt(0).toUpperCase() + record.status.slice(1),\r\n    record.reason || '-'\r\n  ]);\r\n  \r\n  // Add attendance records table\r\n  doc.autoTable({\r\n    startY: 120,\r\n    head: [['Date', 'Status', 'Reason']],\r\n    body: tableData,\r\n  });\r\n  \r\n  // Save PDF\r\n  doc.save(`Attendance_${student.studentId}.pdf`);\r\n  \r\n  return doc;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}