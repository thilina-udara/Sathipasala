{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sathipasala\\\\sathipasala-management-system\\\\frontend\\\\src\\\\pages\\\\admin\\\\AttendanceAnalysis.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttendanceAnalysis = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [attendanceData, setAttendanceData] = useState([]);\n  const [students, setStudents] = useState([]);\n  const [summary, setSummary] = useState({\n    totalStudents: 0,\n    averageAttendance: 0,\n    highestAttendanceDay: '',\n    lowestAttendanceDay: ''\n  });\n  const currentDate = new Date();\n  const currentMonth = currentDate.getMonth() + 1;\n  const currentYear = currentDate.getFullYear();\n  const [filters, setFilters] = useState({\n    month: currentMonth,\n    year: currentYear,\n    classYear: '',\n    classCode: '',\n    studentId: '',\n    searchTerm: ''\n  });\n  const fetchStudents = useCallback(async () => {\n    try {\n      const queryParams = new URLSearchParams();\n      if (filters.classYear) queryParams.append('classYear', filters.classYear);\n      if (filters.classCode) queryParams.append('classCode', filters.classCode);\n      const res = await axios.get(`/api/students?${queryParams.toString()}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const studentsData = res.data.data || [];\n      setStudents(studentsData);\n      return studentsData;\n    } catch (error) {\n      console.error(\"Error fetching students:\", error);\n\n      // For development/demonstration\n      const mockStudents = Array(15).fill(0).map((_, i) => ({\n        _id: `student-${i + 1}`,\n        studentId: `SATHI-${filters.year}-${['A', 'B', 'C'][i % 3]}-${String(i + 1).padStart(3, '0')}`,\n        name: {\n          en: `Student ${i + 1}`,\n          si: `සිසුවා ${i + 1}`\n        },\n        classYear: filters.year || '2023',\n        classCode: ['A', 'B', 'C'][i % 3]\n      }));\n      setStudents(mockStudents);\n      return mockStudents;\n    }\n  }, [filters.classYear, filters.classCode]);\n  const fetchAttendanceData = useCallback(async studentsList => {\n    try {\n      const sundays = getSundaysInMonth(filters.month, filters.year);\n      if (sundays.length === 0) {\n        setAttendanceData([]);\n        setSummary({\n          totalStudents: studentsList.length,\n          averageAttendance: 0,\n          highestAttendanceDay: t('admin.attendance.noSundays'),\n          lowestAttendanceDay: t('admin.attendance.noSundays')\n        });\n        return;\n      }\n\n      // Prepare query parameters\n      let queryParams = new URLSearchParams();\n      queryParams.append('month', filters.month);\n      queryParams.append('year', filters.year);\n      if (filters.classYear) queryParams.append('classYear', filters.classYear);\n      if (filters.classCode) queryParams.append('classCode', filters.classCode);\n      if (filters.studentId) queryParams.append('studentId', filters.studentId);\n\n      // In a production environment, you would fetch real data:\n      /*\r\n      const res = await axios.get(`/api/attendance/monthly?${queryParams.toString()}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      const attendanceData = res.data.data;\r\n      setAttendanceData(attendanceData);\r\n      */\n\n      // For development/demonstration, generate mock data\n      const mockData = generateMockData(sundays, filters.month, filters.year, studentsList);\n      setAttendanceData(mockData);\n\n      // Calculate and set summary statistics\n      calculateAndSetSummary(mockData, studentsList.length);\n    } catch (error) {\n      console.error(\"Error fetching attendance data:\", error);\n\n      // For development/demonstration\n      const sundays = getSundaysInMonth(filters.month, filters.year);\n      const mockData = generateMockData(sundays, filters.month, filters.year, students);\n      setAttendanceData(mockData);\n\n      // Calculate and set summary statistics\n      calculateAndSetSummary(mockData, students.length);\n    }\n  }, [filters, students]);\n  useEffect(() => {\n    setLoading(true);\n    const fetchData = async () => {\n      try {\n        await fetchStudents();\n        await fetchAttendanceData();\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setError(error.message || \"Failed to load attendance data\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [fetchStudents, fetchAttendanceData]);\n\n  // Get all Sundays in the selected month/year\n  const getSundaysInMonth = (month, year) => {\n    const sundays = [];\n    const date = new Date(year, month - 1, 1);\n\n    // Find first Sunday\n    while (date.getDay() !== 0) {\n      date.setDate(date.getDate() + 1);\n    }\n\n    // Get all Sundays in the month\n    while (date.getMonth() === month - 1) {\n      sundays.push(new Date(date));\n      date.setDate(date.getDate() + 7);\n    }\n    return sundays;\n  };\n\n  // Calculate and set summary statistics\n  const calculateAndSetSummary = (attendanceData, totalStudentCount) => {\n    if (!(attendanceData !== null && attendanceData !== void 0 && attendanceData.dailyAttendance)) return;\n    let totalPresent = 0;\n    let highestDay = {\n      date: '',\n      count: 0\n    };\n    let lowestDay = {\n      date: '',\n      count: totalStudentCount\n    };\n    Object.entries(attendanceData.dailyAttendance).forEach(([date, data]) => {\n      totalPresent += data.presentCount || 0;\n      if ((data.presentCount || 0) > highestDay.count) {\n        highestDay = {\n          date,\n          count: data.presentCount || 0\n        };\n      }\n      if ((data.presentCount || 0) < lowestDay.count && Object.keys(attendanceData.dailyAttendance).length > 1) {\n        lowestDay = {\n          date,\n          count: data.presentCount || 0\n        };\n      }\n    });\n    const daysCount = Object.keys(attendanceData.dailyAttendance).length;\n    const averageAttendance = daysCount > 0 ? (totalPresent / (daysCount * totalStudentCount) * 100).toFixed(1) : 0;\n    setSummary({\n      totalStudents: totalStudentCount,\n      averageAttendance,\n      highestAttendanceDay: highestDay.date ? `${new Date(highestDay.date).toLocaleDateString()} (${highestDay.count} ${t('admin.students')})` : t('admin.attendance.noData'),\n      lowestAttendanceDay: lowestDay.date ? `${new Date(lowestDay.date).toLocaleDateString()} (${lowestDay.count} ${t('admin.students')})` : t('admin.attendance.noData')\n    });\n  };\n\n  // Function to generate realistic mock data for Sunday-only classes\n  const generateMockData = (sundays, month, year, studentsList) => {\n    // Add this check at the beginning of the function\n    if (!studentsList || !Array.isArray(studentsList)) {\n      console.warn('StudentsList is undefined or not an array');\n      return []; // Return empty array as fallback\n    }\n    const mockDailyAttendance = {};\n    const totalStudentCount = studentsList.length;\n    sundays.forEach(sunday => {\n      const dateStr = sunday.toISOString().split('T')[0];\n\n      // Generate student-specific attendance data\n      const studentAttendance = {};\n      studentsList.forEach(student => {\n        // Randomize attendance: 80% chance of present, 10% late, 10% absent\n        const rand = Math.random();\n        const status = rand < 0.8 ? 'present' : rand < 0.9 ? 'late' : 'absent';\n        studentAttendance[student._id] = {\n          status,\n          reason: status !== 'present' ? ['Sick', 'Family event', 'Unknown'][Math.floor(Math.random() * 3)] : ''\n        };\n      });\n\n      // Count statistics\n      const presentCount = Object.values(studentAttendance).filter(a => a.status === 'present').length;\n      const absentCount = Object.values(studentAttendance).filter(a => a.status === 'absent').length;\n      const lateCount = Object.values(studentAttendance).filter(a => a.status === 'late').length;\n      mockDailyAttendance[dateStr] = {\n        date: dateStr,\n        totalCount: totalStudentCount,\n        presentCount,\n        absentCount,\n        lateCount,\n        attendanceRate: totalStudentCount > 0 ? (presentCount / totalStudentCount * 100).toFixed(1) : '0',\n        studentAttendance\n      };\n    });\n    return {\n      month,\n      year,\n      totalStudents: totalStudentCount,\n      dailyAttendance: mockDailyAttendance,\n      students: studentsList.map(s => ({\n        id: s._id,\n        studentId: s.studentId,\n        name: s.name\n      }))\n    };\n  };\n  const handleFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleStudentSelect = e => {\n    const selectedId = e.target.value;\n    setFilters(prev => ({\n      ...prev,\n      studentId: selectedId\n    }));\n  };\n  const handleSearch = e => {\n    setFilters(prev => ({\n      ...prev,\n      searchTerm: e.target.value\n    }));\n  };\n  const handleExportCSV = () => {\n    if (!(attendanceData !== null && attendanceData !== void 0 && attendanceData.dailyAttendance)) return;\n\n    // Create CSV header row\n    const headers = [\"Date\", \"Total Students\", \"Present\", \"Absent\", \"Late\", \"Attendance Rate\"];\n\n    // If a specific student is selected, add their details to the header\n    const selectedStudent = filters.studentId ? students.find(s => s._id === filters.studentId) : null;\n    if (selectedStudent) {\n      headers[0] = `Date (Student: ${selectedStudent.studentId} - ${selectedStudent.name.en})`;\n    }\n\n    // Create CSV content\n    const headerRow = headers.join(\",\");\n    const dataRows = Object.values(attendanceData.dailyAttendance).map(day => {\n      const row = [new Date(day.date).toLocaleDateString(), day.totalCount, day.presentCount, day.absentCount, day.lateCount, `${day.attendanceRate}%`];\n      return row.join(\",\");\n    }).join(\"\\n\");\n    const csvContent = `${headerRow}\\n${dataRows}`;\n\n    // Create and trigger download\n    const blob = new Blob([csvContent], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', `attendance-${filters.year}-${String(filters.month).padStart(2, '0')}${selectedStudent ? '-' + selectedStudent.studentId : ''}.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  const filteredStudents = students.filter(student => {\n    var _student$name$si;\n    return !filters.searchTerm || student.name.en.toLowerCase().includes(filters.searchTerm.toLowerCase()) || ((_student$name$si = student.name.si) === null || _student$name$si === void 0 ? void 0 : _student$name$si.toLowerCase().includes(filters.searchTerm.toLowerCase())) || student.studentId.toLowerCase().includes(filters.searchTerm.toLowerCase());\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 rounded-lg shadow p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row md:items-center md:justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900 dark:text-white mb-4 md:mb-0\",\n          children: [\"Monthly Attendance Analysis\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 text-sm font-normal text-blue-600\",\n            children: \"(Sundays Only)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleExportCSV,\n            className: \"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors\",\n            disabled: !(attendanceData !== null && attendanceData !== void 0 && attendanceData.dailyAttendance) || Object.keys(attendanceData.dailyAttendance).length === 0,\n            children: t('admin.export.csv')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.month')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"month\",\n            value: filters.month,\n            onChange: handleFilterChange,\n            className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\",\n            children: months.map((month, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: index + 1,\n              children: t(`admin.months.${month.toLowerCase()}`)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.year')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"year\",\n            value: filters.year,\n            onChange: handleFilterChange,\n            className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\",\n            children: [...Array(5)].map((_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: currentYear - i,\n              children: currentYear - i\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Class\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"classCode\",\n            value: filters.classCode,\n            onChange: handleFilterChange,\n            className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Classes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ADH\",\n              children: \"Adhi\\u1E6D\\u1E6Dh\\u0101na (\\u0D85\\u0DB0\\u0DD2\\u0DA8\\u0DCF\\u0DB1)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"MET\",\n              children: \"Mett\\u0101 (\\u0DB8\\u0DD9\\u0DAD\\u0DCA\\u0DAD\\u0DCF)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"KHA\",\n              children: \"Khanti (\\u0D9B\\u0DB1\\u0DCA\\u0DAD\\u0DD2)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"NEK\",\n              children: \"Nekkhamma (\\u0DB1\\u0DD9\\u0D9A\\u0DCA\\u0D9A\\u0DB8\\u0DCA\\u0DB8)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.search')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: filters.searchTerm,\n            onChange: handleSearch,\n            placeholder: t('admin.attendance.searchPlaceholder'),\n            className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), filteredStudents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n          children: t('admin.students.selectStudent')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.studentId,\n          onChange: handleStudentSelect,\n          className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: t('admin.filters.all')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this), filteredStudents.map(student => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: student._id,\n            children: [student.studentId, \" - \", student.name.en]\n          }, student._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 mb-4 bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 rounded\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center p-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.totalStudents')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold text-blue-800 dark:text-blue-200\",\n            children: summary.totalStudents\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 dark:bg-green-900 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.averageAttendance')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold text-green-800 dark:text-green-200\",\n            children: [summary.averageAttendance, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.highestAttendance')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold text-purple-800 dark:text-purple-200\",\n            children: summary.highestAttendanceDay\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 dark:bg-yellow-900 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: t('admin.attendance.lowestAttendance')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold text-yellow-800 dark:text-yellow-200\",\n            children: summary.lowestAttendanceDay\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 dark:text-white mb-4\",\n          children: [t('admin.attendance.sundays'), \" - \", t(`admin.months.${months[filters.month - 1].toLowerCase()}`), \" \", filters.year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-2\",\n          children: getSundaysInMonth(filters.month, filters.year).map(sunday => {\n            var _attendanceData$daily;\n            const dateStr = sunday.toISOString().split('T')[0];\n            const dayData = (_attendanceData$daily = attendanceData.dailyAttendance) === null || _attendanceData$daily === void 0 ? void 0 : _attendanceData$daily[dateStr];\n            const attendanceRate = dayData ? dayData.attendanceRate : '0';\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white dark:bg-gray-700 rounded-lg shadow p-4 w-32\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: sunday.getDate()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Sunday\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-full bg-gray-200 rounded-full h-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"bg-green-600 h-2 rounded-full\",\n                      style: {\n                        width: `${attendanceRate}%`\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 499,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-1 text-sm font-medium\",\n                  children: [attendanceRate, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 19\n              }, this)\n            }, dateStr, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }, this), getSundaysInMonth(filters.month, filters.year).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-4 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 rounded\",\n          children: t('admin.attendance.noSundaysInMonth')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 dark:text-white mb-4\",\n          children: t('admin.attendance.dailyBreakdown')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), !loading && attendanceData !== null && attendanceData !== void 0 && attendanceData.dailyAttendance && Object.keys(attendanceData.dailyAttendance).length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto rounded-lg shadow\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full bg-white dark:bg-gray-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-100 dark:bg-gray-700\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.date')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.totalStudents')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.present')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.absent')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.late')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: t('admin.attendance.attendanceRate')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"divide-y divide-gray-200 dark:divide-gray-700\",\n              children: Object.values(attendanceData.dailyAttendance).sort((a, b) => new Date(a.date) - new Date(b.date)).map(day => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50 dark:hover:bg-gray-900\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900 dark:text-white\",\n                  children: [new Date(day.date).toLocaleDateString(), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-xs text-blue-600 dark:text-blue-400\",\n                    children: t('admin.attendance.sunday')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 560,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900 dark:text-white\",\n                  children: day.totalCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-green-600 dark:text-green-400\",\n                  children: day.presentCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-red-600 dark:text-red-400\",\n                  children: day.absentCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-yellow-600 dark:text-yellow-400\",\n                  children: day.lateCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-16 bg-gray-200 rounded-full h-2.5 mr-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"bg-green-600 h-2.5 rounded-full\",\n                        style: {\n                          width: `${day.attendanceRate}%`\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 579,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 578,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [day.attendanceRate, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 584,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 577,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 25\n                }, this)]\n              }, day.date, true, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this) : !loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-6 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 rounded\",\n          children: t('admin.attendance.noDataFound')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this), filters.studentId && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 dark:text-white mb-4\",\n          children: t('admin.attendance.studentDetails')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this), (() => {\n          const student = students.find(s => s._id === filters.studentId);\n          if (!student) return null;\n          const records = Object.entries(attendanceData.dailyAttendance || {}).map(([date, data]) => {\n            var _data$studentAttendan, _data$studentAttendan2, _data$studentAttendan3, _data$studentAttendan4;\n            return {\n              date,\n              status: ((_data$studentAttendan = data.studentAttendance) === null || _data$studentAttendan === void 0 ? void 0 : (_data$studentAttendan2 = _data$studentAttendan[student._id]) === null || _data$studentAttendan2 === void 0 ? void 0 : _data$studentAttendan2.status) || 'absent',\n              reason: ((_data$studentAttendan3 = data.studentAttendance) === null || _data$studentAttendan3 === void 0 ? void 0 : (_data$studentAttendan4 = _data$studentAttendan3[student._id]) === null || _data$studentAttendan4 === void 0 ? void 0 : _data$studentAttendan4.reason) || ''\n            };\n          });\n          const presentCount = records.filter(r => r.status === 'present').length;\n          const absentCount = records.filter(r => r.status === 'absent').length;\n          const lateCount = records.filter(r => r.status === 'late').length;\n          const totalClasses = records.length;\n          const attendanceRate = totalClasses > 0 ? (presentCount / totalClasses * 100).toFixed(1) : '0';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-medium text-gray-900 dark:text-white\",\n                    children: student.name.en\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 629,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 dark:text-gray-400\",\n                    children: student.studentId\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-wrap gap-2 justify-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 dark:text-gray-400\",\n                        children: t('admin.attendance.present')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 639,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-lg font-medium text-green-600 dark:text-green-400\",\n                        children: presentCount\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 642,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 638,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 dark:text-gray-400\",\n                        children: t('admin.attendance.absent')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 647,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-lg font-medium text-red-600 dark:text-red-400\",\n                        children: absentCount\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 650,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 646,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 dark:text-gray-400\",\n                        children: t('admin.attendance.late')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 655,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-lg font-medium text-yellow-600 dark:text-yellow-400\",\n                        children: lateCount\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 658,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 654,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 dark:text-gray-400\",\n                        children: t('admin.attendance.attendanceRate')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 663,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-lg font-medium text-blue-600 dark:text-blue-400\",\n                        children: [attendanceRate, \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 666,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 662,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 637,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto rounded-lg shadow\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"min-w-full bg-white dark:bg-gray-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-100 dark:bg-gray-700\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                      children: t('admin.attendance.date')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 679,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                      children: t('admin.attendance.status')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 682,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",\n                      children: t('admin.attendance.reason')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 685,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 678,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  className: \"divide-y divide-gray-200 dark:divide-gray-700\",\n                  children: records.sort((a, b) => new Date(a.date) - new Date(b.date)).map(record => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50 dark:hover:bg-gray-900\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-2 text-sm text-gray-900 dark:text-white\",\n                      children: new Date(record.date).toLocaleDateString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 693,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-2 text-sm\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `px-2 py-1 rounded text-xs font-medium\n                                ${record.status === 'present' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : record.status === 'absent' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'}`,\n                        children: t(`admin.attendance.${record.status}`)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 697,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 696,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-2 text-sm text-gray-900 dark:text-white\",\n                      children: record.reason || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 705,\n                      columnNumber: 29\n                    }, this)]\n                  }, record.date, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 692,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 690,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 17\n          }, this);\n        })()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n_s(AttendanceAnalysis, \"zkioeiS/WRkfDU0o9sUrgb5o+EI=\", false, function () {\n  return [useTranslation];\n});\n_c = AttendanceAnalysis;\nexport default AttendanceAnalysis;\nvar _c;\n$RefreshReg$(_c, \"AttendanceAnalysis\");","map":{"version":3,"names":["useState","useEffect","useCallback","useTranslation","axios","jsxDEV","_jsxDEV","AttendanceAnalysis","_s","t","loading","setLoading","error","setError","attendanceData","setAttendanceData","students","setStudents","summary","setSummary","totalStudents","averageAttendance","highestAttendanceDay","lowestAttendanceDay","currentDate","Date","currentMonth","getMonth","currentYear","getFullYear","filters","setFilters","month","year","classYear","classCode","studentId","searchTerm","fetchStudents","queryParams","URLSearchParams","append","res","get","toString","headers","Authorization","localStorage","getItem","studentsData","data","console","mockStudents","Array","fill","map","_","i","_id","String","padStart","name","en","si","fetchAttendanceData","studentsList","sundays","getSundaysInMonth","length","mockData","generateMockData","calculateAndSetSummary","fetchData","message","date","getDay","setDate","getDate","push","totalStudentCount","dailyAttendance","totalPresent","highestDay","count","lowestDay","Object","entries","forEach","presentCount","keys","daysCount","toFixed","toLocaleDateString","isArray","warn","mockDailyAttendance","sunday","dateStr","toISOString","split","studentAttendance","student","rand","Math","random","status","reason","floor","values","filter","a","absentCount","lateCount","totalCount","attendanceRate","s","id","handleFilterChange","e","value","target","prev","handleStudentSelect","selectedId","handleSearch","handleExportCSV","selectedStudent","find","headerRow","join","dataRows","day","row","csvContent","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","setAttribute","body","appendChild","click","removeChild","months","filteredStudents","_student$name$si","toLowerCase","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onChange","index","placeholder","_attendanceData$daily","dayData","style","width","sort","b","records","_data$studentAttendan","_data$studentAttendan2","_data$studentAttendan3","_data$studentAttendan4","r","totalClasses","record","_c","$RefreshReg$"],"sources":["D:/Sathipasala/sathipasala-management-system/frontend/src/pages/admin/AttendanceAnalysis.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport axios from 'axios';\r\n\r\nconst AttendanceAnalysis = () => {\r\n  const { t } = useTranslation();\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [attendanceData, setAttendanceData] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [summary, setSummary] = useState({\r\n    totalStudents: 0,\r\n    averageAttendance: 0,\r\n    highestAttendanceDay: '',\r\n    lowestAttendanceDay: '',\r\n  });\r\n\r\n  const currentDate = new Date();\r\n  const currentMonth = currentDate.getMonth() + 1;\r\n  const currentYear = currentDate.getFullYear();\r\n\r\n  const [filters, setFilters] = useState({\r\n    month: currentMonth,\r\n    year: currentYear,\r\n    classYear: '',\r\n    classCode: '',\r\n    studentId: '',\r\n    searchTerm: ''\r\n  });\r\n\r\n  const fetchStudents = useCallback(async () => {\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      if (filters.classYear) queryParams.append('classYear', filters.classYear);\r\n      if (filters.classCode) queryParams.append('classCode', filters.classCode);\r\n      \r\n      const res = await axios.get(`/api/students?${queryParams.toString()}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      const studentsData = res.data.data || [];\r\n      setStudents(studentsData);\r\n      return studentsData;\r\n    } catch (error) {\r\n      console.error(\"Error fetching students:\", error);\r\n      \r\n      // For development/demonstration\r\n      const mockStudents = Array(15).fill(0).map((_, i) => ({\r\n        _id: `student-${i+1}`,\r\n        studentId: `SATHI-${filters.year}-${['A', 'B', 'C'][i % 3]}-${String(i+1).padStart(3, '0')}`,\r\n        name: { \r\n          en: `Student ${i+1}`, \r\n          si: `සිසුවා ${i+1}` \r\n        },\r\n        classYear: filters.year || '2023',\r\n        classCode: ['A', 'B', 'C'][i % 3]\r\n      }));\r\n      setStudents(mockStudents);\r\n      return mockStudents;\r\n    }\r\n  }, [filters.classYear, filters.classCode]);\r\n\r\n  const fetchAttendanceData = useCallback(async (studentsList) => {\r\n    try {\r\n      const sundays = getSundaysInMonth(filters.month, filters.year);\r\n      \r\n      if (sundays.length === 0) {\r\n        setAttendanceData([]);\r\n        setSummary({\r\n          totalStudents: studentsList.length,\r\n          averageAttendance: 0,\r\n          highestAttendanceDay: t('admin.attendance.noSundays'),\r\n          lowestAttendanceDay: t('admin.attendance.noSundays')\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Prepare query parameters\r\n      let queryParams = new URLSearchParams();\r\n      queryParams.append('month', filters.month);\r\n      queryParams.append('year', filters.year);\r\n      \r\n      if (filters.classYear) queryParams.append('classYear', filters.classYear);\r\n      if (filters.classCode) queryParams.append('classCode', filters.classCode);\r\n      if (filters.studentId) queryParams.append('studentId', filters.studentId);\r\n      \r\n      // In a production environment, you would fetch real data:\r\n      /*\r\n      const res = await axios.get(`/api/attendance/monthly?${queryParams.toString()}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      const attendanceData = res.data.data;\r\n      setAttendanceData(attendanceData);\r\n      */\r\n      \r\n      // For development/demonstration, generate mock data\r\n      const mockData = generateMockData(sundays, filters.month, filters.year, studentsList);\r\n      setAttendanceData(mockData);\r\n      \r\n      // Calculate and set summary statistics\r\n      calculateAndSetSummary(mockData, studentsList.length);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error fetching attendance data:\", error);\r\n      \r\n      // For development/demonstration\r\n      const sundays = getSundaysInMonth(filters.month, filters.year);\r\n      const mockData = generateMockData(sundays, filters.month, filters.year, students);\r\n      setAttendanceData(mockData);\r\n      \r\n      // Calculate and set summary statistics\r\n      calculateAndSetSummary(mockData, students.length);\r\n    }\r\n  }, [filters, students]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const fetchData = async () => {\r\n      try {\r\n        await fetchStudents();\r\n        await fetchAttendanceData();\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        setError(error.message || \"Failed to load attendance data\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [fetchStudents, fetchAttendanceData]);\r\n\r\n  // Get all Sundays in the selected month/year\r\n  const getSundaysInMonth = (month, year) => {\r\n    const sundays = [];\r\n    const date = new Date(year, month - 1, 1);\r\n    \r\n    // Find first Sunday\r\n    while (date.getDay() !== 0) {\r\n      date.setDate(date.getDate() + 1);\r\n    }\r\n    \r\n    // Get all Sundays in the month\r\n    while (date.getMonth() === month - 1) {\r\n      sundays.push(new Date(date));\r\n      date.setDate(date.getDate() + 7);\r\n    }\r\n    \r\n    return sundays;\r\n  };\r\n  \r\n  // Calculate and set summary statistics\r\n  const calculateAndSetSummary = (attendanceData, totalStudentCount) => {\r\n    if (!attendanceData?.dailyAttendance) return;\r\n    \r\n    let totalPresent = 0;\r\n    let highestDay = { date: '', count: 0 };\r\n    let lowestDay = { date: '', count: totalStudentCount };\r\n    \r\n    Object.entries(attendanceData.dailyAttendance).forEach(([date, data]) => {\r\n      totalPresent += data.presentCount || 0;\r\n      \r\n      if ((data.presentCount || 0) > highestDay.count) {\r\n        highestDay = { date, count: data.presentCount || 0 };\r\n      }\r\n      \r\n      if ((data.presentCount || 0) < lowestDay.count && Object.keys(attendanceData.dailyAttendance).length > 1) {\r\n        lowestDay = { date, count: data.presentCount || 0 };\r\n      }\r\n    });\r\n    \r\n    const daysCount = Object.keys(attendanceData.dailyAttendance).length;\r\n    const averageAttendance = daysCount > 0 \r\n      ? (totalPresent / (daysCount * totalStudentCount) * 100).toFixed(1) \r\n      : 0;\r\n    \r\n    setSummary({\r\n      totalStudents: totalStudentCount,\r\n      averageAttendance,\r\n      highestAttendanceDay: highestDay.date \r\n        ? `${new Date(highestDay.date).toLocaleDateString()} (${highestDay.count} ${t('admin.students')})`\r\n        : t('admin.attendance.noData'),\r\n      lowestAttendanceDay: lowestDay.date \r\n        ? `${new Date(lowestDay.date).toLocaleDateString()} (${lowestDay.count} ${t('admin.students')})`\r\n        : t('admin.attendance.noData')\r\n    });\r\n  };\r\n\r\n  // Function to generate realistic mock data for Sunday-only classes\r\n  const generateMockData = (sundays, month, year, studentsList) => {\r\n    // Add this check at the beginning of the function\r\n    if (!studentsList || !Array.isArray(studentsList)) {\r\n      console.warn('StudentsList is undefined or not an array');\r\n      return []; // Return empty array as fallback\r\n    }\r\n    \r\n    const mockDailyAttendance = {};\r\n    const totalStudentCount = studentsList.length;\r\n    \r\n    sundays.forEach(sunday => {\r\n      const dateStr = sunday.toISOString().split('T')[0];\r\n      \r\n      // Generate student-specific attendance data\r\n      const studentAttendance = {};\r\n      studentsList.forEach(student => {\r\n        // Randomize attendance: 80% chance of present, 10% late, 10% absent\r\n        const rand = Math.random();\r\n        const status = rand < 0.8 ? 'present' : (rand < 0.9 ? 'late' : 'absent');\r\n        \r\n        studentAttendance[student._id] = {\r\n          status,\r\n          reason: status !== 'present' ? ['Sick', 'Family event', 'Unknown'][Math.floor(Math.random() * 3)] : ''\r\n        };\r\n      });\r\n      \r\n      // Count statistics\r\n      const presentCount = Object.values(studentAttendance).filter(a => a.status === 'present').length;\r\n      const absentCount = Object.values(studentAttendance).filter(a => a.status === 'absent').length;\r\n      const lateCount = Object.values(studentAttendance).filter(a => a.status === 'late').length;\r\n      \r\n      mockDailyAttendance[dateStr] = {\r\n        date: dateStr,\r\n        totalCount: totalStudentCount,\r\n        presentCount,\r\n        absentCount,\r\n        lateCount,\r\n        attendanceRate: totalStudentCount > 0 ? ((presentCount / totalStudentCount) * 100).toFixed(1) : '0',\r\n        studentAttendance\r\n      };\r\n    });\r\n    \r\n    return {\r\n      month,\r\n      year,\r\n      totalStudents: totalStudentCount,\r\n      dailyAttendance: mockDailyAttendance,\r\n      students: studentsList.map(s => ({\r\n        id: s._id,\r\n        studentId: s.studentId,\r\n        name: s.name\r\n      }))\r\n    };\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFilters(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleStudentSelect = (e) => {\r\n    const selectedId = e.target.value;\r\n    setFilters(prev => ({ ...prev, studentId: selectedId }));\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setFilters(prev => ({ ...prev, searchTerm: e.target.value }));\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    if (!attendanceData?.dailyAttendance) return;\r\n    \r\n    // Create CSV header row\r\n    const headers = [\"Date\", \"Total Students\", \"Present\", \"Absent\", \"Late\", \"Attendance Rate\"];\r\n    \r\n    // If a specific student is selected, add their details to the header\r\n    const selectedStudent = filters.studentId ? students.find(s => s._id === filters.studentId) : null;\r\n    if (selectedStudent) {\r\n      headers[0] = `Date (Student: ${selectedStudent.studentId} - ${selectedStudent.name.en})`;\r\n    }\r\n    \r\n    // Create CSV content\r\n    const headerRow = headers.join(\",\");\r\n    const dataRows = Object.values(attendanceData.dailyAttendance).map(day => {\r\n      const row = [\r\n        new Date(day.date).toLocaleDateString(),\r\n        day.totalCount,\r\n        day.presentCount,\r\n        day.absentCount,\r\n        day.lateCount,\r\n        `${day.attendanceRate}%`\r\n      ];\r\n      return row.join(\",\");\r\n    }).join(\"\\n\");\r\n    \r\n    const csvContent = `${headerRow}\\n${dataRows}`;\r\n    \r\n    // Create and trigger download\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `attendance-${filters.year}-${String(filters.month).padStart(2, '0')}${selectedStudent ? '-' + selectedStudent.studentId : ''}.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n  \r\n  const months = [\r\n    'January', 'February', 'March', 'April', 'May', 'June',\r\n    'July', 'August', 'September', 'October', 'November', 'December'\r\n  ];\r\n  \r\n  const filteredStudents = students.filter(student => \r\n    !filters.searchTerm || \r\n    student.name.en.toLowerCase().includes(filters.searchTerm.toLowerCase()) ||\r\n    student.name.si?.toLowerCase().includes(filters.searchTerm.toLowerCase()) ||\r\n    student.studentId.toLowerCase().includes(filters.searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4 md:mb-0\">\r\n            Monthly Attendance Analysis\r\n            <span className=\"ml-2 text-sm font-normal text-blue-600\">\r\n              (Sundays Only)\r\n            </span>\r\n          </h2>\r\n          \r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={handleExportCSV}\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\r\n              disabled={!attendanceData?.dailyAttendance || Object.keys(attendanceData.dailyAttendance).length === 0}\r\n            >\r\n              {t('admin.export.csv')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Filters */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.month')}\r\n            </label>\r\n            <select\r\n              name=\"month\"\r\n              value={filters.month}\r\n              onChange={handleFilterChange}\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\r\n            >\r\n              {months.map((month, index) => (\r\n                <option key={index} value={index + 1}>\r\n                  {t(`admin.months.${month.toLowerCase()}`)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.year')}\r\n            </label>\r\n            <select\r\n              name=\"year\"\r\n              value={filters.year}\r\n              onChange={handleFilterChange}\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\r\n            >\r\n              {[...Array(5)].map((_, i) => (\r\n                <option key={i} value={currentYear - i}>\r\n                  {currentYear - i}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Class\r\n            </label>\r\n            <select\r\n              name=\"classCode\"\r\n              value={filters.classCode}\r\n              onChange={handleFilterChange}\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\r\n            >\r\n              <option value=\"\">All Classes</option>\r\n              <option value=\"ADH\">Adhiṭṭhāna (අධිඨාන)</option>\r\n              <option value=\"MET\">Mettā (මෙත්තා)</option>\r\n              <option value=\"KHA\">Khanti (ඛන්ති)</option>\r\n              <option value=\"NEK\">Nekkhamma (නෙක්කම්ම)</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.search')}\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={filters.searchTerm}\r\n              onChange={handleSearch}\r\n              placeholder={t('admin.attendance.searchPlaceholder')}\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {filteredStudents.length > 0 && (\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.students.selectStudent')}\r\n            </label>\r\n            <select\r\n              value={filters.studentId}\r\n              onChange={handleStudentSelect}\r\n              className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white dark:border-gray-600\"\r\n            >\r\n              <option value=\"\">{t('admin.filters.all')}</option>\r\n              {filteredStudents.map(student => (\r\n                <option key={student._id} value={student._id}>\r\n                  {student.studentId} - {student.name.en}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Error Message */}\r\n        {error && (\r\n          <div className=\"p-3 mb-4 bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Loading Indicator */}\r\n        {loading && (\r\n          <div className=\"flex justify-center items-center p-8\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Summary Statistics */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n          <div className=\"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.totalStudents')}\r\n            </h3>\r\n            <p className=\"text-lg font-semibold text-blue-800 dark:text-blue-200\">\r\n              {summary.totalStudents}\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"bg-green-50 dark:bg-green-900 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.averageAttendance')}\r\n            </h3>\r\n            <p className=\"text-lg font-semibold text-green-800 dark:text-green-200\">\r\n              {summary.averageAttendance}%\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.highestAttendance')}\r\n            </h3>\r\n            <p className=\"text-lg font-semibold text-purple-800 dark:text-purple-200\">\r\n              {summary.highestAttendanceDay}\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"bg-yellow-50 dark:bg-yellow-900 p-4 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              {t('admin.attendance.lowestAttendance')}\r\n            </h3>\r\n            <p className=\"text-lg font-semibold text-yellow-800 dark:text-yellow-200\">\r\n              {summary.lowestAttendanceDay}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Sundays Calendar for selected month */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n            {t('admin.attendance.sundays')} - {t(`admin.months.${months[filters.month-1].toLowerCase()}`)} {filters.year}\r\n          </h3>\r\n          \r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {getSundaysInMonth(filters.month, filters.year).map((sunday) => {\r\n              const dateStr = sunday.toISOString().split('T')[0];\r\n              const dayData = attendanceData.dailyAttendance?.[dateStr];\r\n              const attendanceRate = dayData ? dayData.attendanceRate : '0';\r\n              \r\n              return (\r\n                <div key={dateStr} className=\"bg-white dark:bg-gray-700 rounded-lg shadow p-4 w-32\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-sm font-medium\">{sunday.getDate()}</div>\r\n                    <div className=\"text-xs text-gray-500\">Sunday</div>\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div \r\n                          className=\"bg-green-600 h-2 rounded-full\"\r\n                          style={{ width: `${attendanceRate}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-1 text-sm font-medium\">\r\n                      {attendanceRate}%\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          \r\n          {getSundaysInMonth(filters.month, filters.year).length === 0 && (\r\n            <div className=\"text-center p-4 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 rounded\">\r\n              {t('admin.attendance.noSundaysInMonth')}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Daily Breakdown Table */}\r\n        <div>\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n            {t('admin.attendance.dailyBreakdown')}\r\n          </h3>\r\n          \r\n          {!loading && attendanceData?.dailyAttendance && Object.keys(attendanceData.dailyAttendance).length > 0 ? (\r\n            <div className=\"overflow-x-auto rounded-lg shadow\">\r\n              <table className=\"min-w-full bg-white dark:bg-gray-800\">\r\n                <thead className=\"bg-gray-100 dark:bg-gray-700\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.date')}\r\n                    </th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.totalStudents')}\r\n                    </th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.present')}\r\n                    </th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.absent')}\r\n                    </th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.late')}\r\n                    </th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      {t('admin.attendance.attendanceRate')}\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                \r\n                <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                  {Object.values(attendanceData.dailyAttendance)\r\n                    .sort((a, b) => new Date(a.date) - new Date(b.date))\r\n                    .map(day => (\r\n                      <tr key={day.date} className=\"hover:bg-gray-50 dark:hover:bg-gray-900\">\r\n                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-white\">\r\n                          {new Date(day.date).toLocaleDateString()}\r\n                          <span className=\"ml-2 text-xs text-blue-600 dark:text-blue-400\">\r\n                            {t('admin.attendance.sunday')}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-white\">\r\n                          {day.totalCount}\r\n                        </td>\r\n                        <td className=\"px-4 py-2 text-sm text-green-600 dark:text-green-400\">\r\n                          {day.presentCount}\r\n                        </td>\r\n                        <td className=\"px-4 py-2 text-sm text-red-600 dark:text-red-400\">\r\n                          {day.absentCount}\r\n                        </td>\r\n                        <td className=\"px-4 py-2 text-sm text-yellow-600 dark:text-yellow-400\">\r\n                          {day.lateCount}\r\n                        </td>\r\n                        <td className=\"px-4 py-2 text-sm\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"w-16 bg-gray-200 rounded-full h-2.5 mr-2\">\r\n                              <div \r\n                                className=\"bg-green-600 h-2.5 rounded-full\" \r\n                                style={{ width: `${day.attendanceRate}%` }}\r\n                              ></div>\r\n                            </div>\r\n                            <span>{day.attendanceRate}%</span>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : !loading ? (\r\n            <div className=\"text-center p-6 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 rounded\">\r\n              {t('admin.attendance.noDataFound')}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        \r\n        {/* Student Details - Only show if a specific student is selected */}\r\n        {filters.studentId && (\r\n          <div className=\"mt-8\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              {t('admin.attendance.studentDetails')}\r\n            </h3>\r\n            \r\n            {(() => {\r\n              const student = students.find(s => s._id === filters.studentId);\r\n              if (!student) return null;\r\n              \r\n              const records = Object.entries(attendanceData.dailyAttendance || {}).map(([date, data]) => {\r\n                return {\r\n                  date,\r\n                  status: data.studentAttendance?.[student._id]?.status || 'absent',\r\n                  reason: data.studentAttendance?.[student._id]?.reason || ''\r\n                };\r\n              });\r\n              \r\n              const presentCount = records.filter(r => r.status === 'present').length;\r\n              const absentCount = records.filter(r => r.status === 'absent').length;\r\n              const lateCount = records.filter(r => r.status === 'late').length;\r\n              const totalClasses = records.length;\r\n              const attendanceRate = totalClasses > 0 ? ((presentCount / totalClasses) * 100).toFixed(1) : '0';\r\n              \r\n              return (\r\n                <div>\r\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-900 dark:text-white\">\r\n                          {student.name.en}\r\n                        </h4>\r\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {student.studentId}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"flex flex-wrap gap-2 justify-end\">\r\n                          <div className=\"text-center\">\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              {t('admin.attendance.present')}\r\n                            </div>\r\n                            <div className=\"text-lg font-medium text-green-600 dark:text-green-400\">\r\n                              {presentCount}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-center\">\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              {t('admin.attendance.absent')}\r\n                            </div>\r\n                            <div className=\"text-lg font-medium text-red-600 dark:text-red-400\">\r\n                              {absentCount}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-center\">\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              {t('admin.attendance.late')}\r\n                            </div>\r\n                            <div className=\"text-lg font-medium text-yellow-600 dark:text-yellow-400\">\r\n                              {lateCount}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-center\">\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              {t('admin.attendance.attendanceRate')}\r\n                            </div>\r\n                            <div className=\"text-lg font-medium text-blue-600 dark:text-blue-400\">\r\n                              {attendanceRate}%\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"overflow-x-auto rounded-lg shadow\">\r\n                    <table className=\"min-w-full bg-white dark:bg-gray-800\">\r\n                      <thead className=\"bg-gray-100 dark:bg-gray-700\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                            {t('admin.attendance.date')}\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                            {t('admin.attendance.status')}\r\n                          </th>\r\n                          <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                            {t('admin.attendance.reason')}\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {records.sort((a, b) => new Date(a.date) - new Date(b.date)).map((record) => (\r\n                          <tr key={record.date} className=\"hover:bg-gray-50 dark:hover:bg-gray-900\">\r\n                            <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-white\">\r\n                              {new Date(record.date).toLocaleDateString()}\r\n                            </td>\r\n                            <td className=\"px-4 py-2 text-sm\">\r\n                              <span className={`px-2 py-1 rounded text-xs font-medium\r\n                                ${record.status === 'present' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : \r\n                                  record.status === 'absent' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' : \r\n                                  'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'}`}\r\n                              >\r\n                                {t(`admin.attendance.${record.status}`)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-white\">\r\n                              {record.reason || '-'}\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })()}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceAnalysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}